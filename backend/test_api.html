<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIPPOF API æµ‹è¯•ç•Œé¢</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', sans-serif;
            background: linear-gradient(135deg, #2C2A4A 0%, #1A3A52 100%);
            min-height: 100vh;
            color: white;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
            background: linear-gradient(135deg, #a78bfa 0%, #60a5fa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle {
            text-align: center;
            margin-bottom: 40px;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .api-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .api-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 24px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .api-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(124, 58, 237, 0.3);
        }
        
        .api-card h3 {
            color: #a78bfa;
            margin-bottom: 12px;
            font-size: 1.3em;
        }
        
        .api-card p {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 16px;
            line-height: 1.6;
        }
        
        .endpoint {
            background: rgba(124, 58, 237, 0.2);
            padding: 8px 12px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #c4b5fd;
            margin-bottom: 12px;
        }
        
        .test-btn {
            background: #7C3AED;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            width: 100%;
            transition: all 0.3s ease;
        }
        
        .test-btn:hover {
            background: #6d28d9;
            box-shadow: 0 4px 15px rgba(124, 58, 237, 0.6);
        }
        
        .result-area {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 24px;
            margin-top: 40px;
            backdrop-filter: blur(10px);
        }
        
        .result-area h2 {
            color: #60a5fa;
            margin-bottom: 16px;
        }
        
        pre {
            background: rgba(0, 0, 0, 0.3);
            padding: 16px;
            border-radius: 8px;
            overflow-x: auto;
            color: #d1d5db;
            line-height: 1.5;
        }
        
        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
            margin-bottom: 20px;
        }
        
        .status.running {
            background: rgba(34, 197, 94, 0.2);
            color: #86efac;
            border: 1px solid rgba(34, 197, 94, 0.5);
        }
        
        .status.error {
            background: rgba(239, 68, 68, 0.2);
            color: #fca5a5;
            border: 1px solid rgba(239, 68, 68, 0.5);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>AIPPOF API æµ‹è¯•æ§åˆ¶å°</h1>
        <p class="subtitle">AIé©±åŠ¨ä¸ªäººå…»è€é‡‘ä¼˜åŒ–æ¡†æ¶ - åç«¯APIæ¥å£æµ‹è¯•</p>
        
        <div id="server-status"></div>
        
        <div class="api-grid">
            <div class="api-card">
                <h3>ğŸ“Š å·¥èµ„å¢é•¿ç‡é¢„æµ‹</h3>
                <p>åŸºäºè¡Œä¸šã€èŒçº§ã€å¹´é¾„é¢„æµ‹ä¸ªäººå·¥èµ„å¢é•¿ç‡</p>
                <div class="endpoint">POST /api/predict-wage-growth</div>
                <button class="test-btn" onclick="testWageGrowth()">æµ‹è¯•é¢„æµ‹</button>
            </div>
            
            <div class="api-card">
                <h3>ğŸ’° T2èŠ‚ç¨ç‡è®¡ç®—</h3>
                <p>è®¡ç®—å¹³å‡èŠ‚ç¨ç‡ T2 = t1/(1+r/g)^n</p>
                <div class="endpoint">POST /api/calculate-t2</div>
                <button class="test-btn" onclick="testT2()">æµ‹è¯•è®¡ç®—</button>
            </div>
            
            <div class="api-card">
                <h3>ğŸ“ˆ T3é¢†å–æœŸç¨ç‡</h3>
                <p>åŒé€»è¾‘æ–¯è’‚å‡½æ•°è®¡ç®—ç´¯è¿›ç¨ç‡ï¼ˆ0-14%ï¼‰</p>
                <div class="endpoint">POST /api/calculate-t3</div>
                <button class="test-btn" onclick="testT3()">æµ‹è¯•è®¡ç®—</button>
            </div>
            
            <div class="api-card">
                <h3>ğŸ¯ æ¨èç¼´è´¹é¢ä¼˜åŒ–</h3>
                <p>NPVæœ€å¤§åŒ– + è¡¥è´´æœ€å¤§åŒ–ç»¼åˆä¼˜åŒ–</p>
                <div class="endpoint">POST /api/optimize-contribution</div>
                <button class="test-btn" onclick="testOptimize()">æµ‹è¯•ä¼˜åŒ–</button>
            </div>
            
            <div class="api-card">
                <h3>ğŸ’µ NPVå‡€ç°å€¼è®¡ç®—</h3>
                <p>å…¨ç”Ÿå‘½å‘¨æœŸå‡€ç°å€¼è®¡ç®—ï¼ˆ50å¹´ï¼‰</p>
                <div class="endpoint">POST /api/calculate-npv</div>
                <button class="test-btn" onclick="testNPV()">æµ‹è¯•è®¡ç®—</button>
            </div>
            
            <div class="api-card">
                <h3>ğŸ” å†å²æ•°æ®è¯Šæ–­</h3>
                <p>åˆ†æå†å²ç¼´è´¹æ•ˆç‡ï¼Œç»™å‡ºä¼˜åŒ–å»ºè®®</p>
                <div class="endpoint">POST /api/diagnose-history</div>
                <button class="test-btn" onclick="testDiagnose()">æµ‹è¯•è¯Šæ–­</button>
            </div>
            
            <div class="api-card">
                <h3>ğŸ“Š å…¨å‘¨æœŸæ•°æ®ç”Ÿæˆ</h3>
                <p>ç”Ÿæˆ50å¹´å…¨ç”Ÿå‘½å‘¨æœŸå¯è§†åŒ–æ•°æ®</p>
                <div class="endpoint">POST /api/lifecycle-data</div>
                <button class="test-btn" onclick="testLifecycle()">æµ‹è¯•ç”Ÿæˆ</button>
            </div>
            
            <div class="api-card">
                <h3>ğŸ“ˆ ç¼´è´¹é¢å¯¹æ¯”</h3>
                <p>å¯¹æ¯”ä¸åŒç¼´è´¹é¢çš„NPVæ”¶ç›Š</p>
                <div class="endpoint">POST /api/comparison-scenarios</div>
                <button class="test-btn" onclick="testComparison()">æµ‹è¯•å¯¹æ¯”</button>
            </div>
            
            <div class="api-card">
                <h3>âš ï¸ T3é£é™©è¯„ä¼°</h3>
                <p>è¯„ä¼°é«˜æ”¶å…¥ç¾¤ä½“é¢†å–æœŸç¨ç‡é£é™©</p>
                <div class="endpoint">POST /api/risk-assessment</div>
                <button class="test-btn" onclick="testRisk()">æµ‹è¯•è¯„ä¼°</button>
            </div>
            
            <div class="api-card">
                <h3>ğŸ¯ æœ€ä¼˜ç¼´è´¹ä¸Šé™</h3>
                <p>è®¡ç®—é¿å…T3é£é™©çš„æœ€ä¼˜ä¸Šé™</p>
                <div class="endpoint">POST /api/optimal-cap</div>
                <button class="test-btn" onclick="testOptimalCap()">æµ‹è¯•è®¡ç®—</button>
            </div>
            
            <div class="api-card">
                <h3>ğŸ¦ è´¢æ”¿å½±å“åˆ†æ</h3>
                <p>åˆ†ææ”¿åºœç°é‡‘æµä¸è´¢æ”¿å¹³è¡¡</p>
                <div class="endpoint">POST /api/fiscal-analysis</div>
                <button class="test-btn" onclick="testFiscal()">æµ‹è¯•åˆ†æ</button>
            </div>
        </div>
        
        <div class="result-area" id="result-area" style="display:none;">
            <h2>æµ‹è¯•ç»“æœ</h2>
            <pre id="result-content"></pre>
        </div>
    </div>
    
    <script>
        const API_BASE = 'http://localhost:8000/api';
        
        // æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€
        async function checkServerStatus() {
            const statusDiv = document.getElementById('server-status');
            try {
                const response = await fetch('http://localhost:8000/health');
                if (response.ok) {
                    statusDiv.innerHTML = '<div class="status running">ğŸŸ¢ æœåŠ¡å™¨è¿è¡Œä¸­ - http://localhost:8000</div>';
                } else {
                    statusDiv.innerHTML = '<div class="status error">ğŸ”´ æœåŠ¡å™¨å“åº”å¼‚å¸¸</div>';
                }
            } catch (error) {
                statusDiv.innerHTML = '<div class="status error">ğŸ”´ æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨</div>';
            }
        }
        
        function showResult(data) {
            const resultArea = document.getElementById('result-area');
            const resultContent = document.getElementById('result-content');
            resultContent.textContent = JSON.stringify(data, null, 2);
            resultArea.style.display = 'block';
            resultArea.scrollIntoView({ behavior: 'smooth' });
        }
        
        async function testWageGrowth() {
            const data = {
                age: 30,
                annualSalary: 150000,
                industry: 'it',
                jobLevel: 'intermediate'
            };
            
            try {
                const response = await fetch(`${API_BASE}/predict-wage-growth`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                showResult({ request: data, response: result });
            } catch (error) {
                showResult({ error: error.message });
            }
        }
        
        async function testT2() {
            const data = {
                age: 30,
                annualSalary: 150000,
                wageGrowthRate: 3.9
            };
            
            try {
                const response = await fetch(`${API_BASE}/calculate-t2`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                showResult({ request: data, response: result });
            } catch (error) {
                showResult({ error: error.message });
            }
        }
        
        async function testT3() {
            const data = {
                t2: 1.4,
                annualSalary: 150000,
                age: 30
            };
            
            try {
                const response = await fetch(`${API_BASE}/calculate-t3`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                showResult({ request: data, response: result });
            } catch (error) {
                showResult({ error: error.message });
            }
        }
        
        async function testOptimize() {
            const data = {
                age: 30,
                annualSalary: 150000,
                t2: 1.4,
                t3: 1.2,
                wageGrowthRate: 3.9
            };
            
            try {
                const response = await fetch(`${API_BASE}/optimize-contribution`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                showResult({ request: data, response: result });
            } catch (error) {
                showResult({ error: error.message });
            }
        }
        
        async function testNPV() {
            const data = {
                age: 30,
                annualSalary: 150000,
                contributionAmount: 9500,
                t2: 1.4,
                t3: 1.2,
                wageGrowthRate: 3.9
            };
            
            try {
                const response = await fetch(`${API_BASE}/calculate-npv`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                showResult({ request: data, response: result });
            } catch (error) {
                showResult({ error: error.message });
            }
        }
        
        async function testDiagnose() {
            const data = {
                historyData: [
                    { year: 2022, salary: 120000, contribution: 8000 },
                    { year: 2023, salary: 135000, contribution: 10000 },
                    { year: 2024, salary: 150000, contribution: 12000 }
                ],
                age: 30
            };
            
            try {
                const response = await fetch(`${API_BASE}/diagnose-history`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                showResult({ request: data, response: result });
            } catch (error) {
                showResult({ error: error.message });
            }
        }
        
        async function testLifecycle() {
            const data = {
                age: 30,
                annualSalary: 150000,
                contributionAmount: 9500,
                t2: 1.4,
                t3: 1.2,
                wageGrowthRate: 3.9
            };
            
            try {
                const response = await fetch(`${API_BASE}/lifecycle-data`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                showResult({ 
                    request: data, 
                    response: {
                        success: result.success,
                        summary: result.summary,
                        dataPoints: `ç¼´è´¹æœŸ${result.contributionPhase?.years?.length || 0}å¹´ + é¢†å–æœŸ${result.withdrawalPhase?.years?.length || 0}å¹´`
                    }
                });
            } catch (error) {
                showResult({ error: error.message });
            }
        }
        
        async function testComparison() {
            const data = {
                age: 30,
                annualSalary: 150000,
                t2: 1.4,
                t3: 1.2,
                wageGrowthRate: 3.9
            };
            
            try {
                const response = await fetch(`${API_BASE}/comparison-scenarios`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                showResult({ request: data, response: result });
            } catch (error) {
                showResult({ error: error.message });
            }
        }
        
        async function testRisk() {
            const data = {
                annualSalary: 600000,
                t2: 8.0,
                t3: 12.5,
                contributionAmount: 12000,
                age: 45
            };
            
            try {
                const response = await fetch(`${API_BASE}/risk-assessment`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                showResult({ request: data, response: result });
            } catch (error) {
                showResult({ error: error.message });
            }
        }
        
        async function testOptimalCap() {
            const data = {
                annualSalary: 500000,
                t2: 8.0,
                age: 45
            };
            
            try {
                const response = await fetch(`${API_BASE}/optimal-cap`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                showResult({ request: data, response: result });
            } catch (error) {
                showResult({ error: error.message });
            }
        }
        
        async function testFiscal() {
            const data = {
                age: 30,
                annualSalary: 150000,
                contributionAmount: 9500,
                t2: 1.4,
                t3: 1.2,
                wageGrowthRate: 3.9
            };
            
            try {
                const response = await fetch(`${API_BASE}/fiscal-analysis`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                showResult({ request: data, response: result });
            } catch (error) {
                showResult({ error: error.message });
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€
        window.onload = checkServerStatus;
    </script>
</body>
</html>
