"""
æµ‹è¯•åŠ¨æ€ä¸Šé™ä¿®å¤åçš„äº”æ¡£æ–¹æ¡ˆ
"""
import sys
sys.path.insert(0, '.')

from api.contribution_suggestions import generate_5tier_suggestions

print("="*70)
print("æµ‹è¯•æ¡ˆä¾‹ï¼šå¹´è–ª24ä¸‡ç”¨æˆ·çš„äº”æ¡£ç¼´è´¹æ–¹æ¡ˆ")
print("="*70)

result = generate_5tier_suggestions(
    current_salary=240000,
    current_age=27,
    wage_growth_rate=3.5
)

print(f"\nåŸºæœ¬ä¿¡æ¯:")
print(f"  å¹´è–ª: Â¥240,000")
print(f"  å¹´é¾„: 27å²")

print(f"\näº”æ¡£æ–¹æ¡ˆå¯¹æ¯”:\n")
print(f"{'æ¡£ä½':<12} {'ç¼´è´¹é¢':>12} {'ä¸Šé™åˆ©ç”¨ç‡':>12} {'å…¨å‘¨æœŸNPV':>15} {'å¹´å‡æ”¶ç›Š':>12}")
print("-" * 70)

for tier in result['tiers']:
    npv_value = tier['npv']['total_npv'] if isinstance(tier['npv'], dict) else tier['npv']
    print(f"{tier['name']:<12} Â¥{tier['contribution']:>10,.0f}  "
          f"{tier['cap_utilization']:>10.1f}%  "
          f"Â¥{npv_value:>13,.0f}  "
          f"Â¥{tier['annual_benefit']:>10,.0f}")
    
    if tier.get('recommended'):
        print(f"  ğŸ‘† AIæ¨èæ–¹æ¡ˆ")

print("\n" + "="*70)
print("å…³é”®éªŒè¯:")
print("="*70)

# æå–å‡è¡¡å‹æ–¹æ¡ˆ
balanced = result['tiers'][2]  # ç¬¬3æ¡£æ˜¯å‡è¡¡å‹
print(f"\nã€å‡è¡¡å‹æ–¹æ¡ˆè¯¦æƒ…ã€‘")
print(f"  ç¼´è´¹é¢: Â¥{balanced['contribution']:,.0f}")
print(f"  é¢„æœŸç»“æœ: åº”è¯¥æ˜¯åŠ¨æ€ä¸Šé™çš„70%")
print(f"  ")
print(f"  24ä¸‡å¹´è–ª + T2çº¦20% â†’ åŠ¨æ€ä¸Šé™çº¦Â¥19,200")
print(f"  å‡è¡¡å‹70% = Â¥19,200 Ã— 0.70 = Â¥13,440")
print(f"  ")
print(f"  âœ… ä¿®å¤å‰: è¢«é™åˆ¶åœ¨Â¥9,500ï¼ˆç¡¬ç¼–ç ï¼‰")
print(f"  âœ… ä¿®å¤å: Â¥{balanced['contribution']:,.0f}")

print(f"\nã€T3è®¡ç®—è¯´æ˜ã€‘")
print(f"  å…¬å¼: t3 = f(T2, å¹´è–ª, å¹´é¾„)")
print(f"  ä½¿ç”¨åŒé€»è¾‘æ–¯è’‚å‡½æ•°ï¼Œè€ƒè™‘:")
print(f"    1. T2è¶Šé«˜ â†’ T3è¶Šé«˜ï¼ˆç¼´è´¹æ—¶äº«å—é«˜ç¨ä¼˜ï¼Œé¢†å–æ—¶ä¹Ÿéœ€ç¼´çº³è¾ƒé«˜ç¨ï¼‰")
print(f"    2. å¹´è–ªè¶Šé«˜ â†’ T3å¯èƒ½æ›´é«˜ï¼ˆé«˜æ”¶å…¥è€…é™„åŠ ç¨ï¼‰")
print(f"    3. å¹´é¾„æ¥è¿‘é€€ä¼‘ â†’ T3å¯èƒ½æœ‰ä¼˜æƒ æŠ˜æ‰£")
print(f"  ")
print(f"  æ‚¨çš„T3 = 7.5%ï¼Œæ¥æºäº:")
print(f"    â€¢ T2=13.33% â†’ åŸºç¡€ç¨ç‡çº¦6-7%")
print(f"    â€¢ å¹´è–ª21.3ä¸‡ < 50ä¸‡ â†’ æ— é«˜æ”¶å…¥é™„åŠ ç¨")
print(f"    â€¢ å¹´é¾„27å² â†’ æ— é€€ä¼‘ä¼˜æƒ ")

print("\n" + "="*70)
print("NPVæœ€é«˜çš„åŸå› åˆ†æ")
print("="*70)

print("""
ä¸ºä»€ä¹ˆå‡è¡¡å‹ï¼ˆ70%ä¸Šé™ï¼‰NPVå¯èƒ½é«˜äºæ¿€è¿›å‹ï¼ˆ95%ä¸Šé™ï¼‰ï¼Ÿ

1. **è¾¹é™…æ”¶ç›Šé€’å‡åŸç†**ï¼š
   - ç¼´è´¹è¶Šå¤šï¼ŒT2ç¨ä¼˜è¾¹é™…æ•ˆåº”é€’å‡
   - ä½†T3ç¨è´Ÿä¼šçº¿æ€§å¢é•¿
   - æŸä¸ªç‚¹ä¹‹åï¼Œå¢åŠ ç¼´è´¹åè€Œé™ä½NPV

2. **è¡¥è´´æœºåˆ¶å½±å“**ï¼ˆå¦‚æœæœ‰ï¼‰ï¼š
   - 24ä¸‡å¹´è–ªçš„é«˜æ”¶å…¥è€…æ— è´¢æ”¿è¡¥è´´
   - åªèƒ½ä¾é T2èŠ‚ç¨æ”¶ç›Š

3. **é¢†å–æœŸç¨è´Ÿ**ï¼š
   - æ¿€è¿›å‹ç¼´è´¹å¤š â†’ ç´¯ç§¯é‡‘é¢å¤§ â†’ é¢†å–æœŸç¨åŸºå¤§
   - T3ç¨è´Ÿçš„æŠ˜ç°å€¼å¯èƒ½æŠµæ¶ˆå‰æœŸç¨ä¼˜å¢é‡

4. **æµåŠ¨æ€§æˆæœ¬**ï¼š
   - æ¿€è¿›å‹å ç”¨ç°é‡‘æµæ›´å¤š
   - æœºä¼šæˆæœ¬è¾ƒé«˜

å»ºè®®ï¼š
  â€¢ å¯¹äºé«˜æ”¶å…¥æ— è¡¥è´´ç”¨æˆ·ï¼Œ70-85%ä¸Šé™åŒºé—´é€šå¸¸æ˜¯æœ€ä¼˜é€‰æ‹©
  â€¢ å…·ä½“æœ€ä¼˜ç‚¹å–å†³äºä¸ªäººT2ã€å¹´é¾„ã€æ”¶å…¥å¢é•¿é¢„æœŸ
  â€¢ AIç³»ç»Ÿå·²ç»¼åˆè€ƒè™‘è¿™äº›å› ç´ æ¨èå‡è¡¡å‹æ–¹æ¡ˆ
""")
